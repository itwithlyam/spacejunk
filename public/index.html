<!DOCTYPE html>
<html>
    <head>
        <script src="https://files.worldwind.arc.nasa.gov/artifactory/web/0.9.0/worldwind.min.js" type="text/javascript"></script>
        <title>Space Junk Tracker</title>
    </head>
    <body>
        <h1>Space Junk Tracker</h1>
        <div id="globe">
            <canvas id="canvasOne" width="1024" height="768">
                Your browser does not support HTML5 Canvas.
            </canvas>

        </div>
        <h5>Updates every 15 seconds</h5>
        <p id="json"></p>
        <script>
            var wwd = new WorldWind.WorldWindow("canvasOne");
            wwd.addLayer(new WorldWind.BMNGOneImageLayer());
            wwd.addLayer(new WorldWind.BMNGLandsatLayer());
            wwd.addLayer(new WorldWind.CompassLayer());
            wwd.addLayer(new WorldWind.CoordinatesDisplayLayer(wwd));
            wwd.addLayer(new WorldWind.ViewControlsLayer(wwd));
            fetch("https://www.space-track.org/ajaxauth/login", {
                mode: "no-cors",
                method: "POST",
                headers: {
                    identity: "lyam.mosnier@itwithlyam.co.uk",
                    password: "ABCDEFGHIJKLMNO",
                }
            }).then(response => response.json()).then(result => {
                console.log(JSON.parse(result));
                //Document.getElementById("json").innerHTML = JSON.parse(result);
            })
            setInterval(() => {
                // https://www.space-track.org/basicspacedata/query/class/satcat/PERIOD/%3C128/DECAY/null-val/CURRENT/Y/
                fetch("https://www.space-track.org/ajaxauth/login", {
                    mode: "no-cors",
                    method: "POST",
                    headers: {
                        identity: "lyam.mosnier@itwithlyam.co.uk",
                        password: "ABCDEFGHIJKLMNO",
                        //query: "class/satcat/PERIOD/%3C128/DECAY/null-val/CURRENT/Y/"
                    }
                }).then(response => response.json()).then(result => {
                    console.log(JSON.parse(result));
                    Document.getElementById("json").innerHTML = JSON.parse(result);
                })
            }, 15000);
        </script>
    </body>
</html>